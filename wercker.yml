# Wercker configuration for R&G theme generation
box: wercker/nodejs
build:
  steps:
    - npm-install
    - script:
        name: Clone and compile CSS 
        code: |
          git clone https://github.com/twbs/bootstrap.git ${WERCKER_ROOT}/bootstrap
          node ./node_modules/cape-theme-deploy/compile_assets.js
deploy:
  steps:
    - script:
        name: Deploy to cloudfiles
        code: |
          # sudo pip install turbolift
          # turbolift -a ${CLOUDFILES_APIKEY} -u ${CLOUDFILES_USERNAME} --os-rax-auth ord upload --sync -s "${WERCKER_GIT_COMMIT}" -c ${CLOUDFILES_CONTAINER}
          node ./node_modules/cape-theme-deploy/update_assets.js